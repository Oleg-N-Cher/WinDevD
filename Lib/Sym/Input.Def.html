<HTML>
<HEAD>
<! Generated by Watson >
<TITLE> DEFINITION OF Input</TITLE>
</HEAD>
<BODY>
<PRE>
DEFINITION Input; (* portable, except where noted *)

(*
Module Input is responsible for event timing, mouse and keyboard input.
*)

 CONST
  <A NAME= "TimeUnit"></A>TimeUnit = 1000; (* portable, but VAR on other ports *) (* timer ticks per
second (platform dependent). *)
  <A NAME= "SHIFT"></A>SHIFT = 0; <A NAME= "CTRL"></A>CTRL = 1; <A NAME= "ALT"></A>ALT = 2; (* for KeyState *)

 TYPE
  <A NAME= "PollMouse"></A>PollMouse = PROCEDURE (VAR keys: SET; VAR dx, dy, dz: INTEGER): BOOLEAN; (*
non-portable *)
  <A NAME= "PollKeyboard"></A>PollKeyboard = PROCEDURE (VAR ch: CHAR; VAR keys: SET): BOOLEAN; (* non-portable
*)

(* Returns the number of keystrokes in the keyboard input buffer. *)
 PROCEDURE <A NAME= "Available"></A>Available (): INTEGER;

(* Reads the current mouse position x, y and the key state of the mouse buttons

(also called keys). The mouse buttons are numbered from the right to the left
as 
0, 1, 2 (i.e. 1 is the middle mouse button). For example, when the left and
middle 
buttons are pressed, keys will be set to {1, 2}. *)
 PROCEDURE <A NAME= "Mouse"></A>Mouse (VAR keys: SET; VAR x, y: INTEGER);

(* Read a character from the keyboard buffer. Blocks if no character is available.
*)
 PROCEDURE <A NAME= "Read"></A>Read (VAR ch: CHAR);

(* Returns the elapsed number of timer ticks from Oberon startup. *)
 PROCEDURE <A NAME= "Time"></A>Time (): LONGINT;

(* Return the state of the shift keys. *)
 PROCEDURE <A NAME= "KeyState"></A>KeyState (VAR keys: SET);

(* Restricts the extent of the mouse coordinates returned by Mouse. *)
 PROCEDURE <A NAME= "SetMouseLimits"></A>SetMouseLimits (x, y, w, h: INTEGER); (* non-portable *)

(* Configure input device parameters.  Normally only used by installation program.
*)
 PROCEDURE <A NAME= "Configure"></A>Configure (config, value: ARRAY OF CHAR); (* non-portable *)

(* Add a mouse driver.  The poll procedure will be called from Mouse and should
return the next mouse event, including the current key state.  It returns TRUE
iff a mouse event is available. *)
 PROCEDURE <A NAME= "AddMouse"></A>AddMouse (poll: <A HREF= "#PollMouse">PollMouse</A>); (* non-portable *)

(* Remove a mouse driver. *)
 PROCEDURE <A NAME= "RemoveMouse"></A>RemoveMouse (poll: <A HREF= "#PollMouse">PollMouse</A>); (* non-portable *)

(* Add a keyboard driver.  The poll procedure will be called from Available
and Read and should return the next ASCII character.  It returns TRUE iff a
key is available.  The current shift state (SHIFT, CTRL, ALT) should always
be returned, and will be added to KeyState. *)
 PROCEDURE <A NAME= "AddKeyboard"></A>AddKeyboard (poll: <A HREF= "#PollKeyboard">PollKeyboard</A>); (* non-portable *)

(* Remove a keyboard driver. *)
 PROCEDURE <A NAME= "RemoveKeyboard"></A>RemoveKeyboard (poll: <A HREF= "#PollKeyboard">PollKeyboard</A>); (* non-portable *)
END Input.

(* Remarks:

1. Keyboard character codes correspond to the ASCII character set. 
Some other important codes are:

 F1, SETUP 0A4X
 F2, NEUTRALISE 0A5X
 F3, SCRL 0A6X (used in Draw)
 F4, NOSCRL 0A7X (used in Draw)
 UP ARROW 0C1X
 RIGHT ARROW 0C3X
 DOWN ARROW 0C2X
 LEFT ARROW 0C4X
 INSERT 0A0X
 DELETE 0A1X
 PAGE-UP 0A2X
 PAGE-DOWN 0A3X
 &auml;, &Auml; 131, 128
 &ouml;, &Ouml; 132, 129
 &uuml;, &Uuml; 133, 130
 – 150

The module EditKeys allows you to determine the keyboard code of any key pressed.

For cross-platform portability, Oberon does not normally support all keys available

on your keyboard.
*)
</PRE>
</BODY>
</HTML>
